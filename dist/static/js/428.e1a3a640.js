"use strict";(self["webpackChunkmipt"]=self["webpackChunkmipt"]||[]).push([[428],{11428:function(e,s,t){t.r(s),t.d(s,{default:function(){return p}});var r=function(){var e=this,s=e._self._c;return s("div",[s("div",{staticClass:"session-content"},[s("el-form",{ref:"userForm",staticClass:"userForm",attrs:{model:e.userForm,"label-width":"6rem"}},[s("el-form-item",{attrs:{prop:"username",label:"用户名"}},[e.isEdit?s("el-input",{staticStyle:{wdith:"5rem"},attrs:{type:"text",placeholder:"输入用户名"},model:{value:e.userForm.username,callback:function(s){e.$set(e.userForm,"username",s)},expression:"userForm.username"}}):s("span",{domProps:{textContent:e._s(e.user.username)}})],1),s("el-form-item",{attrs:{prop:"userImage",label:"用户头像"}},[e.isEdit?s("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$upload_path,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"on-error":e.handleAvatarError,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?s("el-image",{staticClass:"avatar",attrs:{src:e.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1):s("el-image",{staticClass:"userImage",attrs:{src:e.user.userImage,alt:""}})],1),s("el-form-item",{attrs:{prop:"phone",label:"手机号"}},[e.isEdit?s("el-input",{staticStyle:{wdith:"5rem"},attrs:{type:"text",placeholder:"更改手机号绑定"},model:{value:e.userForm.phone,callback:function(s){e.$set(e.userForm,"phone",s)},expression:"userForm.phone"}}):s("span",{domProps:{textContent:e._s(e.user.phone)}})],1),s("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[e.isEdit?s("el-input",{staticStyle:{wdith:"5rem"},attrs:{type:"text",placeholder:"更改邮箱绑定"},model:{value:e.userForm.email,callback:function(s){e.$set(e.userForm,"email",s)},expression:"userForm.email"}}):s("span",{domProps:{textContent:e._s(e.user.email)}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},domProps:{textContent:e._s(e.isEdit?"修改":"编辑")},on:{click:e.handleChange}})],1)],1)],1),s("div",{staticClass:"session-content"},[s("el-form",{ref:"userForm",staticClass:"userForm",attrs:{model:e.passwordForm,"label-width":"6rem"}},[s("el-form-item",{attrs:{prop:"username",label:"原密码"}},[s("el-input",{staticStyle:{wdith:"5rem"},attrs:{type:"text",placeholder:"输入新密码"},model:{value:e.passwordForm.password,callback:function(s){e.$set(e.passwordForm,"password",s)},expression:"passwordForm.password"}})],1),s("el-form-item",{attrs:{prop:"username",label:"新密码"}},[s("el-input",{staticStyle:{wdith:"5rem"},attrs:{type:"text",placeholder:"输入新密码"},model:{value:e.passwordForm.newPassword,callback:function(s){e.$set(e.passwordForm,"newPassword",s)},expression:"passwordForm.newPassword"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},domProps:{textContent:e._s("修改")},on:{click:e.handleChangePassword}})],1)],1)],1),s("el-empty")],1)},a=[],o=t(20629),l={name:"profilePage",data(){return{userForm:{username:"狂徒张三",userImage:"",phone:"",email:""},passwordForm:{password:"",newPassword:""},isEdit:!1,isChangePassword:!1,imageUrl:""}},mounted(){this.userForm=JSON.parse(sessionStorage.getItem("userInfo"))||{}},computed:{user(){return JSON.parse(sessionStorage.getItem("userInfo"))||{}}},methods:{...(0,o.OI)("user",["UpdateUserInfo"]),handleChangePassword(){this.$message.success("密码修改成功！")},handleChange(){this.isEdit&&(this.$message.success("信息修改成功！"),this.UpdateUserInfo(this.userForm),location.reload()),this.isEdit=!this.isEdit},handleAvatarSuccess(e,s){this.imageUrl=URL.createObjectURL(s.raw)},handleAvatarError(e,s,t){this.$message.error("文件上传失败！")},beforeAvatarUpload(e){console.log(e);const s="image/jpeg"===e.type,t=e.size/1024/1024<2;return s||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),s&&t}}},i=l,n=t(1001),m=(0,n.Z)(i,r,a,!1,null,"4dac95e4",null),p=m.exports}}]);
//# sourceMappingURL=428.e1a3a640.js.map